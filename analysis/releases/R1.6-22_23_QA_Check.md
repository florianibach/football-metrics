# R1.6-22 + R1.6-23 QA Check (DoD + AC Traceability)

Stories:
- **R1.6-22 – Accel/Decel-Bänder im Profil konfigurierbar machen**
- **R1.6-23 – Robuste Accel/Decel-Erkennung mit 2s-Netto-Beschleunigung (1 Hz)**

## AC Traceability

1. **Band-Konfiguration + Validierung im Profil**
   - `MetricThresholdProfile` erweitert um Moderate/High/VeryHigh Bänder für Accel und Decel sowie `AccelDecelMinimumSpeedMps`.
   - Validierungen für Band-Reihenfolge und Vorzeichen sind umgesetzt.
   - Abgedeckt durch Backend-Test:
     - `R1_6_22_Ac03_Ac04_UpdateProfile_ShouldValidateAccelDecelBandOrdering`.

2. **Mindestgeschwindigkeit konfigurierbar + preferred speed unit**
   - Profil unterstützt Mindestgeschwindigkeit in m/s intern.
   - UI zeigt/bearbeitet Mindestgeschwindigkeit in der gewählten Preferred Unit (inkl. mph).
   - Abgedeckt durch:
     - Backend-Test `R1_6_22_Ac05_Ac06_Ac07_UpdateProfile_ShouldPersistMinSpeedAndSupportMphPreferredUnit`.
     - Frontend-Test `R1_6_22_Ac05_Ac06_profile_min_speed_for_accel_decel_uses_preferred_speed_unit`.

3. **2s-Netto-Beschleunigung + Band-Priorität + Event-Logik**
   - Detection berechnet `a₂s(t)` über 2s-Fenster und klassifiziert pro Sample in genau ein höchstes Band.
   - Event-Start bei 1 Kandidat, Event-Ende bei 2 consecutive non-candidates.
   - MinSpeed-Gate nutzt v(t) und v(t-2).
   - Abgedeckt durch synthetische 1Hz-Tests A–F:
     - `R1_6_23_TestA_ModerateAccelEvent_ShouldCountOnlyModerateBand`
     - `R1_6_23_TestB_HighAccelEvent_ShouldCountOnlyHighBand`
     - `R1_6_23_TestC_MinSpeedGate_ShouldSuppressEventsBelowMinimumSpeed`
     - `R1_6_23_TestD_DecelEvent_ShouldBeCountedInConfiguredBand`
     - `R1_6_23_TestE_BandPriority_ShouldAssignToVeryHighOnly`
     - `R1_6_23_TestF_EventEnd_ShouldRequireTwoConsecutiveNonCandidates`

## DoD Kurzcheck

- [x] ACs fachlich umgesetzt.
- [x] AC-Traceability in automatisierten Tests vorhanden.
- [x] Betroffene Backend-/Frontend-Tests grün.
- [x] Story-Status in Story-Datei auf DONE gesetzt (R1.6-22, R1.6-23).
- [x] Story-spezifische Doku ergänzt.

## Ergebnis

Aus QA-Sicht sind **R1.6-22** und **R1.6-23** im umgesetzten Scope **Done-fähig**.
