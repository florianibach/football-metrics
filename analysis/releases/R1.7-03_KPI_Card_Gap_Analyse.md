# R1.7-03 KPI Card Gap-Analyse (Spec vs. aktueller Stand)

Referenz: `analysis/ui/R1.7-03 – Final KPI Card Specification.md`

## Kurzfazit

Die Grundstruktur der Overview ist vorhanden (Volume / Speed / Mechanical / Internal), aber die finale KPI-Card-Spezifikation ist noch **nicht vollständig umgesetzt**.

Größte Lücken:

1. **Internal-Dimension**: Es fehlen noch **3 KPI-Cards** als Karten (HR Zones, TRIMP, HR Recovery) – derzeit nur als Legacy-Liste.
2. **Speed Summary**: Inhaltlich nah dran, aber nicht spec-konform benannt/strukturiert (z. B. Label „Tempo Summary“, fehlende High-Speed-Distance-Zeile im Summary).
3. **Mechanical Summary**: Noch nicht gemäß finaler Struktur (Direction-Change-Intensitäten und Vergleichswert „Ø Accels“).
4. **Duration-Karte**: Vergleichswert „Ø letzte 5“ fehlt.

---

## Detaillierter Abgleich je KPI

## 1) Volume

### 1. Distance (Primary)
- **Ist:** Als `KpiCard` vorhanden inkl. Vergleich (Ø letzte 5, Best Saison) und Aktionen Timeline + Peak.
- **Abweichung:** Optionale Secondary-Zeile `(x m)` wird aktuell nicht gezeigt.
- **Priorität:** Niedrig (im Spec als optional markiert).

### 2. Duration
- **Ist:** Als `KpiCard` vorhanden.
- **Abweichung:** Spec fordert `Ø letzte 5`, aktuell ohne Vergleichszeile.
- **ToDo:** `comparisonAverage` für Duration ergänzen (nur bei Datenverfügbarkeit anzeigen).

### 3. Running Density
- **Ist:** Als `KpiCard` vorhanden mit `Ø letzte 5` und Timeline-Aktion.
- **Abweichung:** Keine wesentliche.

---

## 2) Speed

### 4. Speed Summary (kombiniert)
- **Ist:** Als Karte vorhanden, aber Label ist `Tempo Summary`.
- **Abweichungen zur Spec:**
  - Label sollte `Speed Summary` sein.
  - In der Summary fehlt die Zeile `High-Speed Distance`.
  - Es wird zusätzlich `of which sprint phases count` in der Legacy-Liste geführt; laut Spec soll Sprint-Phase-Count nicht separat als eigener KPI-Fokus erscheinen.
- **ToDo:**
  - Label umstellen auf `Speed Summary`.
  - Secondary-Zeile `High-Speed Distance` ergänzen.
  - Inhalte auf finalen Scope bereinigen.

### 5. High-Speed Distance (Peak)
- **Ist:** Als Peak-Karte mit Ø letzte 5, Best Saison und Aktionen vorhanden.
- **Abweichung:** Keine wesentliche.

---

## 3) Mechanical

### 6. Mechanical Load Summary
- **Ist:** Als `Load Summary` Karte vorhanden.
- **Abweichungen zur Spec:**
  - Label sollte `Mechanical Load` sein.
  - Statt `High Intensity Direction Changes: Moderate/High/Very High` zeigt die Karte aktuell Acceleration-Bands.
  - Vergleich `Ø Accels` fehlt in der Summary-Karte.
- **ToDo:**
  - Label korrigieren.
  - Secondary-Block auf Direction-Change-Intensitäten umstellen.
  - Vergleichswert `Ø Accels` ergänzen.

### 7. Accelerations (Peak)
- **Ist:** Peak-Karte vorhanden inkl. Ø letzte 5, Best Saison, Timeline + Peak.
- **Abweichung:** Keine wesentliche.

---

## 4) Internal

### 8. Heart Rate Summary
- **Ist:** Als Karte vorhanden mit avg/min/max und Timeline-Aktion.
- **Abweichung:** Keine wesentliche.

### 9. HR Zones (Visual KPI)
- **Ist:** **Nicht als KpiCard umgesetzt**; nur in Legacy-Liste als Textwerte.
- **Abweichung:** Visual KPI (Progressbar-Darstellung) fehlt.
- **ToDo:** Eigene HR-Zones-Karte inkl. visualisierten Zonenbalken ergänzen.

### 10. TRIMP (inkl. TRIMP/min)
- **Ist:** Nur in Legacy-Liste (`MetricListItem`), nicht als Karte.
- **Abweichung:** Peak-relevante Primary-Karte fehlt (inkl. Ø letzte 5, Best Saison, Timeline + Peak).
- **ToDo:** Eigene TRIMP-Karte inkl. TRIMP/min + Vergleich + Aktionen ergänzen.

### 11. HR Recovery
- **Ist:** Nur in Legacy-Liste (`MetricListItem`), nicht als Karte.
- **Abweichung:** Secondary-Karte fehlt.
- **ToDo:** Eigene HR-Recovery-Karte inkl. `Ø letzte 5` ergänzen.

---

## Priorisierte Umsetzungsreihenfolge (Empfehlung)

1. **Internal vervollständigen** (HR Zones, TRIMP, HR Recovery als Karten).
2. **Speed Summary bereinigen** (Label, Inhalte, High-Speed-Distance-Zeile).
3. **Mechanical Summary auf finale Struktur bringen** (Direction-Change-Intensitäten, Ø Accels).
4. **Duration-Vergleich ergänzen**.
5. Optional: Distance-Meter-Secondary-Zeile ergänzen.

---

## Technische Hinweise für die Umsetzung

- Vergleichswerte weiterhin strikt optional rendern (`null` wenn nicht vorhanden), gemäß Architekturregel „Vergleich nur anzeigen wenn Backend-Wert vorhanden“.
- Keine neue KPI-Berechnung in der Card-Schicht; nur vorhandene Daten/formatierte Werte nutzen.
- Legacy-Liste `overview-legacy-list` perspektivisch reduzieren, damit KPI-Cards die führende Darstellung bleiben.
