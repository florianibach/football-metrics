# R1.5-09 QA Check (DoD + AC Traceability)

Story: **R1.5-09 – Session mit aktuellem Profil neu berechnen**

## AC-Umsetzung
1. **AC1 – Aktion in Session-Ansicht vorhanden**
   - Frontend ergänzt den Button „Mit aktuellem Profil neu berechnen“ / „Recalculate with current profile“ in der Session-Detailansicht.
   - Abgedeckt durch Test: `R1_5_09_Ac01_Ac04_recalculates_session_with_current_profile_and_shows_profile_history`.

2. **AC2 – Rekalkulation nutzt aktuellen Profilstand**
   - Backend-Endpunkt `POST /api/tcx/{id}/recalculate` lädt das aktuelle Profil, setzt aktuellen Threshold-Snapshot und den aktuellen Default-Filter.
   - Abgedeckt durch Test: `R1_5_09_Ac01_Ac04_Recalculate_ShouldUseCurrentProfileAndExposeHistory`.

3. **AC3 – Alter und neuer Profilstand transparent**
   - API liefert `appliedProfileSnapshot` (Version/Timestamp/Filter) und UI zeigt den aktiven Profilstand explizit.
   - Rekalkulationseinträge enthalten `previousProfile` und `newProfile`.

4. **AC4 – Historie nachvollziehbar ohne stille Überschreibung**
   - Rekalkulationen werden als Verlauf (`recalculationHistory`) persistiert und in der Session-Ansicht angezeigt.
   - Kein stilles Überschreiben: alte und neue Profilstände bleiben als Historieneintrag sichtbar.

## DoD Review (Story-relevant)
- Funktionalität: **erfüllt** (alle ACs im Story-Scope umgesetzt).
- Qualität: **erfüllt** (Backend- und Frontend-Tests mit Story-Referenz ergänzt).
- Dokumentation: **erfüllt** (Story-Status und QA-Check aktualisiert).

Aus QA-Sicht ist R1.5-09 im definierten Story-Scope **Done-fähig**.
