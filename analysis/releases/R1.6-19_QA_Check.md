# R1.6-19 QA Check (DoD + AC Traceability)

Story: **R1.6-19 – Robuste Acceleration- und Deceleration-Detection**

## AC Traceability

1. **Acceleration/Deceleration anhand Δv pro Sekunde und konfigurierten Thresholds**
   - Erkennung basiert auf Beschleunigungs-Samples `(currentSpeed - previousSpeed) / elapsedSeconds`.
   - Schwellen aus dem Profil werden direkt verwendet (`AccelerationThresholdMps2`, `DecelerationThresholdMps2`).

2. **Start nur bei mindestens 2 consecutive Samples über/unter Schwelle**
   - Neue Event-Detection verlangt zwei aufeinanderfolgende qualifizierende Samples vor Event-Start.
   - Abgedeckt durch Tests:
     - `R1_6_19_Ac01_Ac02_Ac03_Ac04_Ac05_Ac06_Ac07_Extract_WithSingleAccelerationSpike_ShouldNotStartAccelerationEvent`
     - `R1_6_19_Ac01_Ac02_Ac03_Ac04_Ac05_Ac06_Extract_WithSingleDecelerationSpike_ShouldNotStartDecelerationEvent`

3. **Ende erst nach 2 consecutive Samples außerhalb Schwelle**
   - Event bleibt bei einem einzelnen Nicht-Qualifizierer offen; beendet erst bei zwei in Folge.
   - Abgedeckt durch Test:
     - `R1_6_19_Ac04_Extract_WithSingleBelowThresholdSampleInsideEvent_ShouldKeepEventOpen`

4. **Einzelsample-Spikes dürfen kein Event auslösen**
   - Single-Spike-Fälle werden durch 2-Sample-Startregel sauber gefiltert.

5. **Zwei consecutive qualifizierende Samples erzeugen genau ein Event**
   - Abgedeckt durch Tests:
     - `R1_6_19_Ac01_Ac02_Ac03_Ac04_Ac06_Ac08_Ac09_Extract_WithTwoConsecutiveAccelerationSamples_ShouldCreateOneAccelerationEvent`
     - `R1_6_19_Ac01_Ac02_Ac03_Ac04_Ac06_Ac08_Ac09_Extract_WithTwoConsecutiveDecelerationSamples_ShouldCreateOneDecelerationEvent`

6. **1 Hz-Datenbasis / zeitnormierte Logik**
   - Tests nutzen 1-Hz-Builder für Story-Kernfälle; zusätzlich ist die Logik robust gegen variable Dauer via `elapsedSeconds`.

## DoD Kurzcheck

- [x] ACs fachlich umgesetzt.
- [x] Automatisierte Tests mit AC-Traceability ergänzt.
- [x] Betroffene Backend-Tests grün.
- [x] Story-Status in Story-Datei auf DONE gesetzt.
- [x] Story-spezifische Doku ergänzt (dieser QA-Check).

## Ergebnis

Aus QA-Sicht ist **R1.6-19** im umgesetzten Story-Scope **Done-fähig**.
